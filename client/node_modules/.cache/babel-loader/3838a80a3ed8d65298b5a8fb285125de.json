{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jonathaningram/Desktop/testing1/Sprint6/ProjectTitan/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jonathaningram/Desktop/testing1/Sprint6/ProjectTitan/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jonathaningram/Desktop/testing1/Sprint6/ProjectTitan/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState}from'react';import Progress from'./Progress';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileUpload=function FileUpload(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),filename=_useState4[0],setFilename=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),uploadedFile=_useState6[0],setUploadedFile=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),uploadPercentage=_useState10[0],setUploadPercentage=_useState10[1];var onChange=function onChange(e){setFile(e.target.files[0]);setFilename(e.target.files[0].name);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,res,_res$data,fileName,filePath;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData();formData.append('file',file);_context.prev=3;_context.next=6;return axios.post('/upload',formData,{headers:{'Content-Type':'multipart/form-data'},onUploadProgress:function onUploadProgress(progressEvent){setUploadPercentage(parseInt(Math.round(progressEvent.loaded*100/progressEvent.total)));// Clear percentage\n// Clear percentage\nsetTimeout(function(){return setUploadPercentage(0);},10000);}});case 6:res=_context.sent;_res$data=res.data,fileName=_res$data.fileName,filePath=_res$data.filePath;setUploadedFile({fileName:fileName,filePath:filePath});setMessage('File Uploaded');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);if(_context.t0.response.status===500){setMessage('There was a problem with the server');}else{setMessage(_context.t0.response.data.msg);}case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,12]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"custom-file-input col-md-offset-3 \",id:\"customFile\",onChange:onChange}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label col-md-offset-3\",htmlFor:\"customFile\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Upload\",className:\"btn col-md-5 col-md-offset-3\"})]}),uploadedFile?/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-9 m-auto col-md-offset-1\",children:/*#__PURE__*/_jsx(\"img\",{style:{width:'100%'},src:uploadedFile.filePath,alt:\"\"})})}):null]});};export default FileUpload;","map":{"version":3,"sources":["/Users/jonathaningram/Desktop/testing1/Sprint6/ProjectTitan/client/src/components/FileUpload/FileUpload.js"],"names":["React","Fragment","useState","Progress","axios","FileUpload","file","setFile","filename","setFilename","uploadedFile","setUploadedFile","message","setMessage","uploadPercentage","setUploadPercentage","onChange","e","target","files","name","onSubmit","preventDefault","formData","FormData","append","post","headers","onUploadProgress","progressEvent","parseInt","Math","round","loaded","total","setTimeout","res","data","fileName","filePath","response","status","msg","width"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\n\nimport Progress from './Progress';\nimport axios from 'axios';\n\nconst FileUpload = () => {\n  const [file, setFile] = useState('');\n  const [filename, setFilename] = useState('');\n  const [uploadedFile, setUploadedFile] = useState({});\n  const [message, setMessage] = useState('');\n  const [uploadPercentage, setUploadPercentage] = useState(0);\n\n  const onChange = e => {\n    setFile(e.target.files[0]);\n    setFilename(e.target.files[0].name);\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const res = await axios.post('/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: progressEvent => {\n          setUploadPercentage(\n            parseInt(\n              Math.round((progressEvent.loaded * 100) / progressEvent.total)\n            )\n          );\n\n          // Clear percentage\n          setTimeout(() => setUploadPercentage(0), 10000);\n        }\n      });\n\n      const { fileName, filePath } = res.data;\n\n      setUploadedFile({ fileName, filePath });\n\n      setMessage('File Uploaded');\n    } catch (err) {\n      if (err.response.status === 500) {\n        setMessage('There was a problem with the server');\n      } else {\n        setMessage(err.response.data.msg);\n      }\n    }\n  };\n\n  return (\n    <Fragment>\n      <form onSubmit={onSubmit}>\n        <div className='custom-file mb-4'>\n          <input\n            type='file'\n            className='custom-file-input col-md-offset-3 '\n            id='customFile'\n            onChange={onChange}\n          />\n          <label className='custom-file-label col-md-offset-3' htmlFor='customFile'>\n            \n          </label>\n        </div>\n        <input\n          type='submit'\n          value='Upload'\n          className='btn col-md-5 col-md-offset-3'\n        />\n\n      </form>\n      {uploadedFile ? (\n        <div className='row mt-5'>\n          <div className='col-md-9 m-auto col-md-offset-1'>\n            <img style={{ width: '100%' }} src={uploadedFile.filePath} alt='' />\n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  );\n};\n\nexport default FileUpload;"]},"metadata":{},"sourceType":"module"}